import random

def monster_dungeon_escape():
    rooms = ['start', 'left', 'right', 'straight']
    random.shuffle(rooms)
    room_descriptions = {
        'start': '당신은 어두운 던전의 출발 지점에 있습니다. 출구를 찾아 탈출하세요.',
        'left': '당신은 왼쪽 방으로 들어갔습니다. 여긴 막다른 길입니다.',
        'right': '당신은 오른쪽 방으로 들어갔습니다. 여긴 보물이 있습니다.',
        'straight': '당신은 직진했습니다. 여긴 출구입니다. 당신은 탈출했습니다!'
    }
    monster_rooms = random.sample(rooms, 2)
    current_room = 'start'
    
    while current_room != 'straight':
        print(room_descriptions[current_room])
        
        if current_room in monster_rooms:
            print('몬스터가 나타났습니다! 싸울 준비를 하세요.')
            fight = input('싸우시겠습니까? (yes/no): ').lower()
            if fight == 'yes':
                if random.choice([True, False]):
                    print('당신은 몬스터를 물리쳤습니다!')
                else:
                    print('당신은 몬스터에게 패배했습니다. 게임 오버.')
                    return
            else:
                print('당신은 도망쳤습니다.')
        
        direction = input('어디로 가시겠습니까? (left/right/straight): ').lower()
        if direction in ['left', 'right', 'straight']:
            current_room = random.choice(rooms)
        else:
            print('잘못된 입력입니다.')

    print(room_descriptions['straight'])

monster_dungeon_escape()

