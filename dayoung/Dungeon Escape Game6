from itertools import permutations

def solution(k, dungeons):
    d_num = len(dungeons)
    answer = []
    
    for permute in permutations(dungeons, d_num):
        limit = k
        cnt = 0
        
        for pm in permute:
            if limit >= pm[0]:
                limit -= pm[1]
                cnt += 1
        answer.append(cnt)
        
    return max(answer)

