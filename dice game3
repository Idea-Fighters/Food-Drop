import random
import time
import os

def dice_num():
    while True:
        try:
            dice_cnt = input('주사위 갯수: ')
            options = ['1','2']
            if dice_cnt not in options:
                raise ValueError('1 , 2 만 가능합니다')
            else:
                return dice_cnt
        except ValueError as err:
            print(err)

def participants():
    while True:
        try:
            players = input('참가자를 입력해주세요. ex) 홍길동 김상순\n ')
            players = [name.strip() for name in players.split()]
            return players
        except:
            raise ValueError('띄어쓰기 구분자로 올바르게 입력해주세요')
            
def play_again():
    while True:
        try:
            play = input('다시 돌리겠습니까?  ex) Yes, No 으로 대답해주세요')
            if (play.upper() == 'Y') or (play.upper() == 'YES'):
                return True
            else:
                return False
        except:
            raise ValueError('Yes 혹은 No로 올바르게 입력해주세요')
    
            
def roll_dice(min_n=1, max_n=6):
    min_n = 1
    max_n = 6
    LET_ME_DO_IT_AGAIN = True
    
    while LET_ME_DO_IT_AGAIN:
        os.system('cls' if os.name == 'nt' else 'clear')
        amount = dice_num()          # 주사위 개수 설정
        players = participants() # 참가자 설정
        
        result = {k:[] for k in players}
        print(result)
        print('\n'*2) #구분자 
        print('='*40) #구분자
        print(f'주사위를 굴립니다...')
        print('='*40) #구분자
        print('\n'*2) #구분자      
        
        for i in range(0,int(amount)):
            
            for person in players:
                
                time.sleep(random.randint(1,4))  # 긴장감을 위해 LAG 추가
                dice = random.randint(min_n, max_n)
                print(f'{person}   주사위 {i}: ', dice)
                result[person].append(dice)
                print('='*40) #구분자 
        
        lucky = 99
        print(result)
        print('\n'*2)
        for person in players:
            time.sleep(2)
            print(f'{person}님의 합계는: ', sum(result[person]))
            print('='*40) #구분자    
            if sum(result[person]) < lucky:
                lucky = sum(result[person])
                lucky_person = person
            elif sum(result[person]) == lucky:
                lucky_person = lucky_person + ", " + person
        print(f"당첨자는: {lucky_person} 입니다.")  
                  
        LET_ME_DO_IT_AGAIN = play_again()

                  
if __name__ == '__main__':
    roll_dice()
